netty入门教程之 了解并学习使用protocol buff

1.protocol buff是一种协议，是谷歌推出的一种序列化协议

2.Java序列化协议也是一种协议

3.两者的目的是，将对象序列化成字节数组，或者说是二进制数据

Java序列化结果(包含类的信息，反序列化无需配置文件)：
[-84, -19, 0, 5, 115, 114, 0, 15, 99, 111, 109, 46, 106, 97, 118, 97, 46, 80, 108, 97, 121, 101, 114, -73, 43, 28, 39, -119, -86, -125, -3, 2, 0, 4, 73, 0, 3, 97, 103, 101, 74, 0, 8, 112, 108, 97, 121, 101, 114, 73, 100, 76, 0, 4, 110, 97, 109, 101, 116, 0, 18, 76, 106, 97, 118, 97, 47, 108, 97, 110, 103, 47, 83, 116, 114, 105, 110, 103, 59, 76, 0, 6, 115, 107, 105, 108, 108, 115, 116, 0, 16, 76, 106, 97, 118, 97, 47, 117, 116, 105, 108, 47, 76, 105, 115, 116, 59, 120, 112, 0, 0, 0, 20, 0, 0, 0, 0, 0, 0, 0, 101, 116, 0, 5, 112, 101, 116, 101, 114, 115, 114, 0, 19, 106, 97, 118, 97, 46, 117, 116, 105, 108, 46, 65, 114, 114, 97, 121, 76, 105, 115, 116, 120, -127, -46, 29, -103, -57, 97, -99, 3, 0, 1, 73, 0, 4, 115, 105, 122, 101, 120, 112, 0, 0, 0, 1, 119, 4, 0, 0, 0, 10, 115, 114, 0, 17, 106, 97, 118, 97, 46, 108, 97, 110, 103, 46, 73, 110, 116, 101, 103, 101, 114, 18, -30, -96, -92, -9, -127, -121, 56, 2, 0, 1, 73, 0, 5, 118, 97, 108, 117, 101, 120, 114, 0, 16, 106, 97, 118, 97, 46, 108, 97, 110, 103, 46, 78, 117, 109, 98, 101, 114, -122, -84, -107, 29, 11, -108, -32, -117, 2, 0, 0, 120, 112, 0, 0, 3, -23, 120]


protobuf序列化结果(需要使用配置文件生成的类来反序列化)：
[8, 101, 16, 20, 26, 5, 112, 101, 116, 101, 114, 32, -23, 7]

int 4字节   伸缩性，根据大小分配1~5字节

long 8内存


=============================================================
writeRawVarint32(int value){
  while(true){
     if((value & ~0x7F) == 0){
        // 0x7F : 0111 1111
	// ~0x7F : 1000 0000
	// if (value & ~0x7F) == 0 ~~~> value < 0x7F, 即int不够一个字节
        writeRawByte(value); // 就写一个字节就行了
     } else {
        writeRawByte((value & 0x7F) | 0x80);
	// 0x80: 1000 0000，第八位作为标志位，1表示还有数据，0则表示就剩最后这7位数据了
	// 那么4位只能表示数据的位只有28
	// 所以protobuf int序列化后占的空间为1~5个字节
	value >>>= 7;
     }

  }
}